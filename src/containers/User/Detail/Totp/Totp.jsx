import React from "react";
import { Card, Spinner, H2, P, NumberInput } from "pi-ui";
import useTotp from "../hooks/useTotp";
import FormWrapper from "src/components/FormWrapper";

const VerifyTotp = ({ onVerify }) => (
  <div>
    <H2>Verify TOTP</H2>
    <P>
      TOTP Token already set. You can verify it by using the key generated by
      your TOTP authenticator.
    </P>
    <FormWrapper initialValues={{ code: "" }} onSubmit={onVerify}></FormWrapper>
    <NumberInput name="code" id="totp-code" />
  </div>
);
const SetTotp = () => (
  <div>
    <H2>SET TOTP</H2>
  </div>
);

const Totp = () => {
  const { loading, alreadySet, totp } = useTotp();
  console.log("state", totp);
  return loading ? (
    <Spinner invert />
  ) : (
    <Card paddingSize="small">{alreadySet ? <VerifyTotp /> : <SetTotp />}</Card>
  );
};

export default Totp;
